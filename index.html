<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Text → HTML Saver</title>
  <style>
    body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,sans-serif;max-width:900px;margin:20px auto;padding:0 14px;background:#0b1020;color:#e9eeff}
    .card{background:#121a33;border:1px solid #30406f;border-radius:14px;padding:14px}
    h1{margin:0 0 8px}
    p{color:#9db1e6}
    input,textarea,button{font:inherit}
    input,textarea{width:100%;background:#0b1330;color:#e9eeff;border:1px solid #364a82;border-radius:10px;padding:10px}
    textarea{min-height:260px;resize:vertical}
    .row{display:grid;grid-template-columns:1fr 180px;gap:8px;margin:10px 0}
    button{background:#1a3f86;border:1px solid #3f66b2;color:#fff;border-radius:10px;padding:10px 12px;cursor:pointer}
    button:hover{filter:brightness(1.08)}
    .small{font-size:.88rem;color:#9db1e6}
    .warn{color:#ffcf88}
  </style>
</head>
<body>
  <div class="card">
    <h1>Text → HTML Saver</h1>
    <p>Paste content, choose a filename, click save. It downloads a full <code>.html</code> file.</p>

    <label class="small" for="title">Page Title</label>
    <input id="title" placeholder="My Notes Page" />

    <div class="row">
      <div>
        <label class="small" for="filename">Filename (without extension)</label>
        <input id="filename" value="my-page" />
      </div>
      <div style="display:flex;align-items:end">
        <button id="saveBtn" style="width:100%">Save as HTML</button>
      </div>
    </div>

    <label class="small" for="content">Content</label>
    <textarea id="content" placeholder="Paste your text here..."></textarea>

    <label class="small" style="display:flex;align-items:center;gap:8px;margin-top:10px">
      <input id="rawHtml" type="checkbox" style="width:auto" />
      Treat content as raw HTML (no escaping)
    </label>
    <p class="small warn">Raw HTML mode will execute scripts in the saved file. Only use with trusted code.</p>
  </div>

<script>
const esc = (s='') => s
  .replaceAll('&','&amp;')
  .replaceAll('<','&lt;')
  .replaceAll('>','&gt;');

function buildHtml(title, text, rawHtml){
  const bodyContent = rawHtml ? text : `<h1>${esc(title || 'Document')}</h1><div class="content">${esc(text)}</div>`;
  const extraStyle = rawHtml ? '' : '<style>body{font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;max-width:900px;margin:24px auto;padding:0 14px;line-height:1.5} h1{margin-bottom:14px} .content{white-space:pre-wrap}</style>';
  return `<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>${esc(title || 'Document')}</title>
  ${extraStyle}
</head>
<body>
${bodyContent}
</body>
</html>`;
}

document.getElementById('saveBtn').addEventListener('click', () => {
  const title = document.getElementById('title').value.trim();
  const filenameRaw = document.getElementById('filename').value.trim() || 'document';
  const text = document.getElementById('content').value;
  const rawHtml = document.getElementById('rawHtml').checked;

  const filename = filenameRaw.replace(/[^a-zA-Z0-9-_]/g, '-') + '.html';
  const html = buildHtml(title, text, rawHtml);

  const blob = new Blob([html], { type: 'text/html;charset=utf-8' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = filename;
  a.click();
  URL.revokeObjectURL(url);
});
</script>
</body>
</html>
