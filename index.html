<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Text â†’ HTML Studio</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#050816;
      --panel:rgba(13,20,45,.72);
      --line:rgba(158,186,255,.28);
      --text:#eaf1ff;
      --muted:#9eb0de;
      --accent:#66a8ff;
      --accent2:#8b5cf6;
      --ok:#24d1a2;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 700px at -10% -10%, #1d3d93 0%, transparent 60%),
        radial-gradient(900px 500px at 110% -20%, #6a2ac7 0%, transparent 55%),
        radial-gradient(900px 600px at 50% 120%, #0a6f7f 0%, transparent 55%),
        var(--bg);
      padding:28px 14px;
    }
    .app{max-width:1100px;margin:0 auto;display:grid;gap:14px}
    .glass{
      background:var(--panel);
      border:1px solid var(--line);
      box-shadow:0 24px 70px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.06);
      backdrop-filter: blur(14px);
      border-radius:22px;
    }
    .hero{padding:22px 20px;display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;gap:12px}
    .title{margin:0;font-size:clamp(1.4rem, 2.5vw, 2rem);font-weight:800;letter-spacing:.2px}
    .sub{margin:.35rem 0 0;color:var(--muted)}
    .badge{display:inline-flex;align-items:center;gap:8px;background:rgba(36,209,162,.12);border:1px solid rgba(36,209,162,.45);color:#8effdc;padding:8px 12px;border-radius:999px;font-weight:600;font-size:.88rem}
    .dot{width:8px;height:8px;border-radius:50%;background:var(--ok);box-shadow:0 0 16px var(--ok)}

    .editor{padding:16px;display:grid;grid-template-columns:1fr;gap:12px}
    @media (min-width:960px){ .editor{grid-template-columns:1fr 1fr} }

    .panel{padding:14px}
    .panel h2{margin:0 0 10px;font-size:1rem}
    .small{font-size:.85rem;color:var(--muted)}

    label{display:block;font-size:.85rem;color:#b8c8f3;margin:0 0 6px}
    input,textarea,button{
      font:inherit;
      color:var(--text);
    }
    input,textarea{
      width:100%;
      border-radius:14px;
      border:1px solid rgba(130,160,230,.38);
      background:rgba(8,14,36,.68);
      padding:11px 12px;
      outline:none;
      transition:.2s border, .2s box-shadow;
    }
    input:focus,textarea:focus{
      border-color:var(--accent);
      box-shadow:0 0 0 4px rgba(102,168,255,.16);
    }
    textarea{min-height:320px;resize:vertical;line-height:1.45}

    .row{display:grid;grid-template-columns:1fr 170px;gap:10px}
    .toggle{display:flex;align-items:center;gap:10px;margin-top:10px;padding:10px;border:1px dashed rgba(130,160,230,.35);border-radius:12px}

    .btn{
      width:100%;
      padding:12px;
      border:1px solid rgba(126,178,255,.55);
      border-radius:14px;
      font-weight:700;
      cursor:pointer;
      background:linear-gradient(135deg, #2563eb 0%, #7c3aed 100%);
      box-shadow:0 10px 30px rgba(37,99,235,.35), inset 0 1px 0 rgba(255,255,255,.18);
      transition:.15s transform, .2s filter;
    }
    .btn:hover{filter:brightness(1.08)}
    .btn:active{transform:translateY(1px) scale(.995)}

    .actions{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
    .chip{
      border:1px solid rgba(126,178,255,.45);
      background:rgba(37,99,235,.16);
      color:#dbe8ff;
      border-radius:999px;
      padding:7px 11px;
      font-size:.8rem;
      cursor:pointer;
    }

    .preview{
      min-height:320px;
      border-radius:14px;
      background:linear-gradient(180deg, rgba(7,12,30,.8), rgba(8,14,36,.5));
      border:1px solid rgba(130,160,230,.28);
      overflow:hidden;
    }
    .preview-head{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;border-bottom:1px solid rgba(130,160,230,.2)}
    .preview-body{padding:12px;max-height:380px;overflow:auto;color:#d8e5ff}
    .meta{display:flex;gap:14px;flex-wrap:wrap;color:var(--muted);font-size:.82rem;margin-top:10px}
    code{color:#bbd3ff}
  </style>
</head>
<body>
  <main class="app">
    <section class="hero glass">
      <div>
        <h1 class="title">Text â†’ HTML Studio</h1>
        <p class="sub">Drop in plain text or full HTML and export polished files instantly.</p>
      </div>
      <div class="badge"><span class="dot"></span> Ready to export</div>
    </section>

    <section class="editor glass">
      <div class="panel">
        <h2>Editor</h2>

        <label for="title">Page Title</label>
        <input id="title" placeholder="My Notes Page" />

        <div class="row" style="margin-top:10px">
          <div>
            <label for="filename">Filename (without extension)</label>
            <input id="filename" value="my-page" />
          </div>
          <div style="display:flex;align-items:end">
            <button id="saveBtn" class="btn">Save as HTML</button>
          </div>
        </div>

        <label for="content" style="margin-top:10px">Content</label>
        <textarea id="content" placeholder="Paste your text or HTML here..."></textarea>

        <div class="toggle">
          <input id="rawHtml" type="checkbox" style="width:auto" />
          <label for="rawHtml" style="margin:0">Treat content as raw HTML (no escaping)</label>
        </div>

        <div class="actions">
          <button class="chip" id="tplNote" type="button">Template: Notes</button>
          <button class="chip" id="tplLanding" type="button">Template: Landing</button>
          <button class="chip" id="clearBtn" type="button">Clear</button>
        </div>

        <p class="small" style="margin-top:10px">Raw HTML mode can run scripts in the exported file. Use trusted code only. Full <code>&lt;!doctype html&gt;</code> documents are auto-detected and exported as-is.</p>
      </div>

      <div class="panel">
        <h2>Live Preview</h2>
        <div class="preview">
          <div class="preview-head">
            <span class="small">Rendered output</span>
            <span class="small" id="modeTag">Escaped text mode</span>
          </div>
          <div class="preview-body" id="previewBody"></div>
        </div>
        <div class="meta">
          <span id="chars">0 chars</span>
          <span id="words">0 words</span>
          <span>Export format: <code>.html</code></span>
        </div>
      </div>
    </section>
  </main>

<script>
const esc = (s='') => s
  .replaceAll('&','&amp;')
  .replaceAll('<','&lt;')
  .replaceAll('>','&gt;');

const titleEl = document.getElementById('title');
const fileEl = document.getElementById('filename');
const contentEl = document.getElementById('content');
const rawEl = document.getElementById('rawHtml');
const modeTag = document.getElementById('modeTag');
const previewBody = document.getElementById('previewBody');
const charsEl = document.getElementById('chars');
const wordsEl = document.getElementById('words');

function looksLikeFullHtml(text=''){
  return /<!doctype\s+html/i.test(text) || /<html[\s>]/i.test(text);
}

function buildHtml(title, text, rawHtml){
  // If content is already a full HTML document, export it as-is.
  if (looksLikeFullHtml(text)) return text;

  const bodyContent = rawHtml
    ? text
    : `<h1>${esc(title || 'Document')}</h1><div class="content">${esc(text)}</div>`;
  const extraStyle = rawHtml
    ? ''
    : '<style>body{font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;max-width:900px;margin:24px auto;padding:0 14px;line-height:1.5} h1{margin-bottom:14px} .content{white-space:pre-wrap}</style>';

  return `<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>${esc(title || 'Document')}</title>
  ${extraStyle}
</head>
<body>
${bodyContent}
</body>
</html>`;
}

function updatePreview(){
  const text = contentEl.value;
  const title = titleEl.value.trim();
  const raw = rawEl.checked;
  const autoFullDoc = looksLikeFullHtml(text);

  modeTag.textContent = autoFullDoc
    ? 'Full HTML document detected (auto passthrough on save)'
    : (raw ? 'Raw HTML mode' : 'Escaped text mode');
  const words = (text.trim().match(/\S+/g) || []).length;
  charsEl.textContent = `${text.length} chars`;
  wordsEl.textContent = `${words} words`;

  if (!text.trim()) {
    previewBody.innerHTML = '<p class="small">Preview will appear hereâ€¦</p>';
    return;
  }

  if (raw) {
    previewBody.innerHTML = text;
  } else {
    previewBody.innerHTML = `<h3 style="margin-top:0">${esc(title || 'Document')}</h3><div style="white-space:pre-wrap">${esc(text)}</div>`;
  }
}

function saveFile(){
  const title = titleEl.value.trim();
  const filenameRaw = fileEl.value.trim() || 'document';
  const text = contentEl.value;
  const rawHtml = rawEl.checked;

  const filename = filenameRaw.replace(/[^a-zA-Z0-9-_]/g, '-') + '.html';
  const html = buildHtml(title, text, rawHtml);

  const blob = new Blob([html], { type: 'text/html;charset=utf-8' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = filename;
  a.click();
  URL.revokeObjectURL(url);
}

function setTemplate(kind){
  rawEl.checked = true;
  if (kind === 'notes') {
    titleEl.value = 'Quick Notes';
    fileEl.value = 'quick-notes';
    contentEl.value = `<main style="max-width:820px;margin:24px auto;padding:0 16px;font-family:system-ui">
  <h1>Quick Notes</h1>
  <p>Capture ideas, todos, and snippets.</p>
  <ul>
    <li>âœ… Task one</li>
    <li>ðŸ§  Idea two</li>
    <li>ðŸ“Œ Reminder three</li>
  </ul>
</main>`;
  } else {
    titleEl.value = 'Launch Page';
    fileEl.value = 'launch-page';
    contentEl.value = `<section style="min-height:100vh;display:grid;place-items:center;background:linear-gradient(135deg,#111827,#1e3a8a);color:white;font-family:Inter,system-ui">
  <div style="text-align:center;padding:24px">
    <h1 style="font-size:clamp(2rem,6vw,4rem);margin:0">Ship Fast</h1>
    <p style="opacity:.9">A clean starter hero for your next project.</p>
    <a href="#" style="display:inline-block;margin-top:10px;padding:10px 16px;border-radius:12px;background:#60a5fa;color:#0b1020;text-decoration:none;font-weight:700">Get Started</a>
  </div>
</section>`;
  }
  updatePreview();
}

document.getElementById('saveBtn').addEventListener('click', saveFile);
document.getElementById('clearBtn').addEventListener('click', () => { contentEl.value=''; updatePreview(); });
document.getElementById('tplNote').addEventListener('click', () => setTemplate('notes'));
document.getElementById('tplLanding').addEventListener('click', () => setTemplate('landing'));

[titleEl, fileEl, contentEl, rawEl].forEach(el => el.addEventListener('input', updatePreview));
updatePreview();
</script>
</body>
</html>
